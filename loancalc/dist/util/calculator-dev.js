"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const webpack=require("webpack"),koa_webpack_middleware_1=require("koa-webpack-middleware"),Process=require("process"),Path=require("path"),config=require("config"),serve_1=require("../serve");function init(){serve_1.Logger.info("Initializing calculator webpack...");const a=config.get("webpack"),b=Path.resolve(Process.cwd,a.calculator.file);serve_1.Logger.info("Calculator Webpack Config: ",b);const c=require(b),d=webpack(c),e=koa_webpack_middleware_1.devMiddleware(d,{noInfo:!1,lazy:!1,watchOptions:{aggregateTimeout:300,poll:!1},publicPath:"/scalc/",headers:{"X-Custom-Header":"yes"},stats:{colors:!0}}),f=koa_webpack_middleware_1.hotMiddleware(d,{log:serve_1.Logger.info,path:"/__webpack_hmr",heartbeat:10000});return serve_1.Logger.info("Calculator webpack initialized."),{dev:e,hot:f}}exports.init=init;